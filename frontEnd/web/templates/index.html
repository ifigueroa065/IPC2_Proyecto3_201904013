{% load static %}
<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PROYECTO3_IPC2</title>

    <!--PLANTILLA-->
        <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
            <meta name="description" content="">
            <meta name="author" content="">

            <title>PROYECTO2_IPC2</title>

            
            <!-- Bootstrap core CSS -->
            <link href="{%  static 'vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">

            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">

            <link href="{%  static 'img/icon.png' %}" rel="icon">
            <link href="{%  static 'img/apple-touch-icon.png' %}" rel="apple-touch-icon">

            <!-- Custom fonts for this template -->
            <link href="{%  static 'vendor/fontawesome-free/css/all.min.css' %}" rel="stylesheet" type="text/css">
            <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel='stylesheet' type='text/css'>
            <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel='stylesheet' type='text/css'>

            <!-- Custom styles for this template -->
            <link href="{%  static 'css/clean-blog.min.css' %}" rel="stylesheet">
            
            
            <!--PLANTILLA-->
        </head>
  </head>
  <body>
    <!--PLANTILLA-->
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
      <div class="container">
      <a class="navbar-brand" href="">FACULTAD DE INGENERÍA</a>
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          M
          <i class="fas fa-bars"></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
          <li class="nav-item">
              <a class="nav-link" href="">INICIO</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle"   role="button" data-bs-toggle="dropdown" aria-expanded="false">
              AYUDA
            </a>
            <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="navbarDarkDropdownMenuLink">
              <li><a class="dropdown-item" onclick="mostrarDatos()">DATOS</a></li>
              <li><a class="dropdown-item" onclick="mostrarDocu()" >DOCUMENTACIÓN</a></li>
              
            </ul>
          </li>
          
          </ul>
      </div>
      </div>
      </nav>

      <!-- Page Header -->
      <header class="masthead" style="background-image:url(https://www.wallpaperuse.com/wallp/12-123130_m.jpg);">
      <div class="overlay"></div>
      <div class="container">
      <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
          <div class="site-heading">
              <h1>PROYECTO3_IPC2</h1>
              <span class="subheading">201904013</span>
          </div>
          </div>

        
      </div>
      </div>
      </header>

      <!-- Main Content -->
      <div class="container">
      <div class="row">
      <div >
          <div class="post-preview">
          <a >  
            <center>
              <h2 class="post-title">
                CARGAR ARCHIVO
                </h2>
                <h3 class="post-subtitle">
                
                </h3>
            </center>
              
          </a>
          <br>
          <form>
            <div class="row">
              <div>
                <input class="form-control form-control-lg" id="file-input" type="file">
              </div>
            </div>
          </form>
            <br>
          
          </div>
        
                  <hr>
                  <div style="text-align: right;">
                    <button type="button" class="btn btn-outline-dark" onclick="consultar()">CONSULTAR DATOS</button>
                    <button type="button" class="btn btn-outline-dark">FILTRAR</button>
                    <button type="button" class="btn btn-outline-dark">FILTRO 2</button>
                  </div>
                  <br>
                  <div style="text-align: center;">
                    <button type="button" class="btn btn-outline-success" onclick="enviar()" >ENVIAR</button>
                    <button type="button" class="btn btn-outline-danger" onclick="RESET()">RESET</button>
                  </div>
                  <hr>
                  <form id="post-form1">
                    <div class="form-row">
                      <div class="col">
                        <div class="form-group">
                          <label for="exampleFormControlTextarea1">ENTRADA</label>
                          <textarea class="form-control" id="entrada" rows="20" readonly="readonly"></textarea>
                        </div>
                      </div>
                      <div class="col">
                        <div class="form-group">
                          <label for="exampleFormControlTextarea1">SALIDA</label>
                          <textarea class="form-control" id="salida" rows="20" readonly="readonly"></textarea>
                        </div>
                      </div>
                    </div>
                  </form>
              </div>
              </div>
              
          </div>
              
          <hr>
         <div id="pdf">

         </div> 

          <!-- Footer -->
          <footer>
              <div class="container">
              <div class="row">
                  <div class="col-lg-8 col-md-10 mx-auto">
                  <ul class="list-inline text-center">
                      <li class="list-inline-item">
                      <a href="#">
                          <span class="fa-stack fa-lg">
                          <i class="fas fa-circle fa-stack-2x"></i>
                          <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                          </span>
                      </a>
                      </li>
                      <li class="list-inline-item">
                      <a href="#">
                          <span class="fa-stack fa-lg">
                          <i class="fas fa-circle fa-stack-2x"></i>
                          <i class="fab fa-facebook-f fa-stack-1x fa-inverse"></i>
                          </span>
                      </a>
                      </li>
                      <li class="list-inline-item">
                      <a href="#">
                          <span class="fa-stack fa-lg">
                          <i class="fas fa-circle fa-stack-2x"></i>
                          <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                          </span>
                      </a>
                      </li>
                  </ul>
                  <p class="copyright text-muted"> &copy; Facultad de Ingenería 2021</p>
                  </div>
              </div>
              </div>
          </footer>

          <!-- Bootstrap core JavaScript -->
          <script src="{%  static 'vendor/jquery/jquery.min.js' %}"></script>
          <script src="{%  static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
          <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8" crossorigin="anonymous"></script>
          <!-- Custom scripts for this template -->
          <script src="{%  static 'js/clean-blog.min.js' %}"></script>
          
          


    <!--LECTURA DE ARCHIVO-->
    <script>
      function leerArchivo(e) {
        var archivo = e.target.files[0];
        if (!archivo) {
          return;
        }
        var lector = new FileReader();
        lector.onload = function(e) {
          var contenido = e.target.result;
          mostrarContenido(contenido);
        };
        lector.readAsText(archivo);
      }

      function mostrarContenido(contenido) {

        var ent=document.getElementById('entrada');
        ent.innerHTML=contenido;
        
      }

      document.getElementById('file-input')
        .addEventListener('change', leerArchivo, false);
    </script>      


    <script>
      function enviar(){
        let cargado = document.querySelector("#entrada").value;
        let messages = document.getElementById("messages");

        fetch("http://localhost:5000/archivo/", {
          method: "POST",
          headers: {
            "Content-Type": "text/plain",
          },
          body: cargado,
        }).then((res) => {
          if (res.ok) {
            alert("SE ENVIÓ CORRECTAMENTE")
          }
        });
        
      }

      function consultar(){
        let cargado = document.querySelector("#salida");
        let messages = document.getElementById("messages");
        
        fetch("http://localhost:5000/archivo/", {
          method: "GET",
          headers: {
            "Content-Type": "text/plain",
          },
        })
          .then((res) => {
            if (res.ok) {
              return res.text();
            }
          })
          .then((res_txt) => {
            cargado.innerHTML = res_txt;
            console.log("POST-Consulta de Análisis")
          });
      

      }
      function mostrarDatos(){
        alert(" 201904013- Marlon Isaí Figueroa Farfan\n IPC2-1S2021\n Seccion:B")
      }

      function mostrarDocu(){
        var dic=document.getElementById("pdf")
        dic.innerHTML+=`"<iframe  src="{%  static 'Documentacion.pdf' %}" width="100%" height="1000"></iframe>`
        alert("YA PUEDE VISUALIZAR LA DOCUMENTACIÓN")
      }

      function RESET() {
        alert("RESET EXITOSO")
        var ent=document.getElementById("entrada");
        var sal=document.getElementById("salida");

        ent.value=""
        sal.value=""

        location.href = ""
        }
    </script>
  </body>
</html>